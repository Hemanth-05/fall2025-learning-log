# Date: 2025-09-18
## Topics covered: Validators, Sanitizers and Modifiers

### Validators, Sanitizers and Modifiers

#### What are Validators?
Validators are checks that ensure the input meets certain rules or constraints before being accepted by the system.

##### Examples:
- An email field must contain a valid email format.
- A password must be at least 8 characters long.
- An age field must be a number between 18 and 65.
- A title cannot be empty.

##### In Express (using express-validator):
```js
import { body } from 'express-validator';

router.post(
  '/register',
  [
    body('email').isEmail(),                // validator: must be a valid email
    body('password').isLength({ min: 8 }) // validator: must be ≥ 8 chars
  ],
  (req, res) => {
    // handle after validation
  }
);
```

---

#### What are Sanitizers?
Sanitizers clean or transform the input into a safe and consistent format before storing or processing it.

### Examples:
- Trimming whitespace: `"   hello  "` → `"hello"`
- Escaping HTML: `<script>alert("xss")</script>` → `&lt;script&gt;alert("xss")&lt;/script&gt;`
- Normalizing email: `"JOHN@EXAMPLE.COM"` → `"john@example.com"`
- Converting string to int: `"42"` → `42`

##### In Express (using express-validator):
```js
body('email').normalizeEmail(),    // sanitizer
body('username').trim().escape()   // sanitizer: trims + escapes special chars
```

---

#### Why Use Both?
- **Validation** prevents bad or invalid data from entering the system (e.g., wrong type, missing info).
- **Sanitization** ensures accepted data is clean, safe, and standardized (e.g., avoids XSS, SQL injection).

---

#### Combined Example
```js
router.post(
  '/login',
  [
    body('email')
      .isEmail()          // validator
      .normalizeEmail(),  // sanitizer
    body('password')
      .isLength({ min: 8 })  // validator
      .trim()                  // sanitizer
  ],
  (req, res) => {
    // req.body.email and req.body.password are now validated & sanitized
  }
);
```
---

### Modifiers  

#### What are Modifiers?  
**Modifiers** don’t directly validate or sanitize data.  
Instead, they **control how validators and sanitizers run**, or **modify the behavior of validation chains**.  

They’re configuration helpers that let you fine-tune your validation logic.  

---

#### Common Modifiers in Express-Validator  

##### 1. `.optional()`  
Skips validation/sanitization if the field is missing.  
```js
body('nickname')
  .optional()   // field is not required
  .isString();  // only checked if present
```

---

##### 2. `.withMessage()`  
Customizes the error message for a validator.  
```js
body('email')
  .isEmail()
  .withMessage('Please enter a valid email address');
```

---

##### 3. `.bail()`  
Stops running further validators if one already failed.  
```js
body('password')
  .isLength({ min: 8 })
  .bail()               // stop here if length fails
  .matches(/[0-9]/);    // only checked if length passed
```

---

##### 4. `.exists()`  
Ensures that the field is present in the request (not `null` or `undefined`).  
```js
body('username').exists();
```

---

##### 5. `.in()`  
Specifies where to check for the value (body, params, query, headers).  
```js
check('token').in('headers');   // looks in req.headers.token
```

---

#### Why Use Modifiers?  
- Make some fields optional without breaking validation.  
- Provide user-friendly error messages.  
- Avoid unnecessary validations when earlier ones fail.  
- Control where Express looks for a value (body, params, query, headers).  

---

#### Summary
- **Validators** = Check rules ("Is this valid?").
- **Sanitizers** = Clean/transform input ("Make it safe/consistent").
- - **Modifiers** → adjust **how** validation/sanitization happens (scope, conditions, messages).  
