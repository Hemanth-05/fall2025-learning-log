# Date: 2025-09-23
## Topics Covered: Database Constraints & Referential Integrity

### üîí What are Database Constraints?
Database **constraints** are **rules** enforced by the database on a table‚Äôs columns.  
They ensure the **accuracy**, **consistency**, and **integrity** of the data by restricting what kind of values can be stored.  

Think of them as **data validation checks at the database level**.

---

### üß© Types of Constraints

#### 1. NOT NULL
Ensures a column **cannot have NULL values**.

```sql
CREATE TABLE Students (
    student_id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);
```

‚û°Ô∏è Every student must have a name.

---

#### 2. UNIQUE
Ensures all values in a column are **different** (no duplicates).

```sql
CREATE TABLE Users (
    email VARCHAR(100) UNIQUE
);
```

‚û°Ô∏è No two users can share the same email.

---

#### 3. PRIMARY KEY
- A combination of **NOT NULL** and **UNIQUE**.
- Identifies each row uniquely in a table.
- Only **one primary key** per table.

```sql
CREATE TABLE Employees (
    emp_id INT PRIMARY KEY,
    emp_name VARCHAR(50)
);
```

‚û°Ô∏è Each employee has a unique ID.

---

#### 4. FOREIGN KEY
- Establishes a **relationship** between two tables.
- Ensures that the value in one table exists in another (referential integrity).

```sql
CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
```

‚û°Ô∏è Every `customer_id` in Orders must exist in Customers.

---

#### 5. CHECK
Restricts column values based on a **condition**.

```sql
CREATE TABLE Products (
    product_id INT PRIMARY KEY,
    price DECIMAL(10,2) CHECK (price > 0)
);
```

‚û°Ô∏è Price must always be positive.

---

#### 6. DEFAULT
Assigns a **default value** to a column if no value is provided.

```sql
CREATE TABLE Accounts (
    account_id INT PRIMARY KEY,
    balance DECIMAL(10,2) DEFAULT 0
);
```

‚û°Ô∏è If no balance is given, it defaults to `0`.

---

#### 7. AUTO_INCREMENT / IDENTITY (Database-specific)
Automatically generates sequential values for a column (usually the primary key).

```sql
CREATE TABLE Tickets (
    ticket_id INT AUTO_INCREMENT PRIMARY KEY,
    issue VARCHAR(255)
);
```

‚û°Ô∏è Ticket IDs generate automatically.

---

### üìä Summary Table of Constraints

| Constraint     | Purpose |
|----------------|---------|
| **NOT NULL**   | Prevents NULL values |
| **UNIQUE**     | Prevents duplicate values |
| **PRIMARY KEY**| Uniquely identifies rows |
| **FOREIGN KEY**| Maintains relationship between tables |
| **CHECK**      | Enforces a condition on values |
| **DEFAULT**    | Provides default values |
| **AUTO_INCREMENT** | Generates unique numbers automatically |

---

### üîó Referential Integrity
**Referential Integrity (RI)** is a **rule in relational databases** that ensures relationships between tables remain **consistent and valid**.  

- If one table (child) refers to another table (parent) using a **foreign key**, then the value in the child table **must exist in the parent table**.  

#### Example

**Customers (Parent Table):**
```sql
CREATE TABLE Customers (
    customer_id INT PRIMARY KEY,
    name VARCHAR(50)
);
```

**Orde#rs (Child Table):**
```sql
CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
```

‚úî You can only insert an order if the `customer_id` exists in Customers.  
‚úî You cannot delete a customer if they still have related orders (unless cascading rules are applied).  

---

### ‚öôÔ∏è Referential Actions for Foreign Keys
When defining a foreign key, you can specify actions if the parent record is deleted or updated:

- **CASCADE** ‚Üí Automatically update/delete child rows.  
- **SET NULL** ‚Üí Set the child‚Äôs foreign key to NULL.  
- **SET DEFAULT** ‚Üí Set the child‚Äôs foreign key to a default value.  
- **RESTRICT / NO ACTION** ‚Üí Prevent deletion/updates if child rows exist.  

```sql
FOREIGN KEY (customer_id) 
REFERENCES Customers(customer_id) 
ON DELETE CASCADE 
ON UPDATE CASCADE;
```

---

### ‚úÖ Foreign Key Constraints
- A **foreign key constraint** is the actual **rule** that enforces referential integrity.  
- It ensures the child table‚Äôs foreign key value **must exist** in the parent table‚Äôs primary key.  

**In short:**  
- **Foreign key = column used for linking**  
- **Foreign key constraint = rule that enforces the link**  
- **Referential integrity = guarantee that links are valid**  

